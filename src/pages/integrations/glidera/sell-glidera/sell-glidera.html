<ion-header>
  <ion-navbar>
    <ion-title>Sell bitcoin</ion-title>
  </ion-navbar>
</ion-header>

<ion-content padding>
  <ion-card *ngIf="sendStatus === 'success'">
    <ion-card-header>
      Funds sent to Glidera Account
    </ion-card-header>
    <ion-card-content>
      The transaction is not yet confirmed, and will show as "Pending" in your Activity. The bitcoin sale will be completed automatically
      once it is confirmed by Glidera.
    </ion-card-content>
  </ion-card>
  <ion-list *ngIf="sellInfo">
    <ion-item>
      <div class="selling-label">
        <img class="selling-img" src="assets/img/icon-tx-sent-outline.svg">
        <span>Selling</span>
      </div>
      <div class="amount-label">
        <div class="amount">{{amountUnitStr}}</div>
        <div class="alternative">
          <span *ngIf="!isFiat">{{sellInfo.subtotal}} {{sellInfo.currency}}</span>
          <span *ngIf="isFiat">{{sellInfo.qty}} BTC</span> @ ${{sellInfo.price}} per BTC
        </div>
      </div>
    </ion-item>

    <ion-item-group class="info">
      <button ion-item (click)="showWallets()" class="wallets-list">
          <div>From</div>
          <div class="wallet">
            <img *ngIf="network == 'testnet'" [ngStyle]="{'background-color': wallet && wallet.color}" src="assets/img/icon-wallet-testnet.svg"
            class="icon-wallet" />
            <img *ngIf="network != 'testnet'" [ngStyle]="{'background-color': wallet && wallet.color}" src="assets/img/icon-wallet.svg" class="icon-wallet"
          />
            <span>{{wallet ? wallet.name : '...'}}</span>
          </div>
        </button>
      <ion-item-divider color="light">
        Transaction details
      </ion-item-divider>
      <ion-item>
        <span>Expires</span>
        <ion-note item-end>
          {{sellInfo.expires | amCalendar}}
        </ion-note>
      </ion-item>
      <ion-item>
        <span>Fees</span>
        <ion-note item-end>
          {{sellInfo.fees}} {{sellInfo.currency}}
        </ion-note>
      </ion-item>
      <ion-item>
        <span>Total to receive</span>
        <ion-note item-end>
          {{sellInfo.total}} {{sellInfo.currency}}
        </ion-note>
      </ion-item>
    </ion-item-group>
  </ion-list>
</ion-content>

<ion-footer *ngIf="sendStatus != 'success'">
  <button ion-button block class="button-footer" (click)="sellConfirm()" [disabled]="!wallet">Confirm sale</button>
</ion-footer>

<ion-footer *ngIf="sendStatus === 'success'">
  <button ion-button block class="button-footer" (click)="goBackHome()">Accept and back home</button>
</ion-footer>