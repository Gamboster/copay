<ion-header>
  <ion-navbar>
    <ion-title>{{'Pending Proposals'|translate}}</ion-title>
  </ion-navbar>
</ion-header>

<ion-content [ngClass]="{'no-margin-bottom': !txpsToSign[0], 'small-margin': !isCordova && txpsToSign[0]}">

  <ion-card *ngIf="signErr" (click)="signErr = false">
    <ion-item class="assertive">
      <div>{{signErr}}</div>
    </ion-item>
  </ion-card>

  <ion-list *ngIf="allTxps && allTxps[0]">
    <div *ngFor="let txpsByWallet of allTxps">
      <div class="wallet-divider" *ngIf="txpsByWallet.walletId && txpsByWallet.txps && txpsByWallet.txps[0] && txpsByWallet.txps[0].wallet">

        <div class="wallet-icon">
          <ion-icon class="item-img" item-start>
            <img *ngIf="txpsByWallet.txps[0].wallet.network == 'testnet'" [ngStyle]="{'background-color': txpsByWallet.txps[0].wallet.color}" src="assets/img/icon-wallet-testnet.svg" class="icon-wallet" />
            <img *ngIf="txpsByWallet.txps[0].wallet.network != 'testnet'" [ngStyle]="{'background-color': txpsByWallet.txps[0].wallet.color}" src="assets/img/icon-wallet.svg" class="icon-wallet" />
          </ion-icon>
          <span class="name">{{txpsByWallet.txps[0].wallet.name}}</span>
        </div>
        <div *ngIf="txpsByWallet.multipleSignAvailable" class="multi-sign" outline (click)="signMultipleProposals(txpsByWallet)">
          <ion-icon name="ios-list-outline"></ion-icon>
        </div>
      </div>
      <div class="txp-container" *ngFor="let txp of txpsByWallet.txps">
        <ion-checkbox (ionChange)="txpSelectionChange(txp)" *ngIf="walletIdSelectedToSign && txp.walletId == walletIdSelectedToSign && txp.statusForUs === 'pending'" [checked]="txp.checked" [disabled]="txp.statusForUs == 'accepted' || txp.statusForUs == 'rejected'"></ion-checkbox>
        <page-txp [ngClass]="{'with-checkbox': walletIdSelectedToSign && txp.walletId == walletIdSelectedToSign && txp.statusForUs === 'pending'}" [tx]="txp" [addressbook]="addressbook"></page-txp>
      </div>
    </div>
  </ion-list>
</ion-content>


<ion-footer>
  <page-slide-to-accept #slideButton *ngIf="isCordova && txpsToSign[0]" [ngClass]="{'slide-confirm-fast slide-confirm-down': hideSlideButton, 'slide-confirm-slow': !hideSlideButton}" [buttonText]="buttonText" (slideDone)="sign()"></page-slide-to-accept>
  <ion-toolbar *ngIf="!isCordova && txpsToSign[0]">
    <button ion-button full class="button-footer" (click)="sign()">{{buttonText}}</button>
  </ion-toolbar>
</ion-footer>